webpackJsonp([1],{0:function(t,e){},"2GMO":function(t,e){},"4GIO":function(t,e){},BomA:function(t,e){},GIaV:function(t,e){},HKI0:function(t,e){},HkO7:function(t,e){},LGhG:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r=n("zL8q"),a=n.n(r),s=(n("tvR6"),n("lbHh")),i=n.n(s);o.default.use(a.a);var l={name:"menutab",data:function(){return{ustate:!1,activeIndex:"1",activeIndex2:"1"}},created:function(){localStorage.getItem("auth")&&(this.ustate=!0)},methods:{toProf:function(){window.location.href="https://researchers.anu.edu.au/researchers/devine-k"},logout:function(){var t=this,e=i.a.get("csrftoken"),n={Authorization:localStorage.getItem("auth"),"X-CSRFToken":e};this.$http.post("http://127.0.0.1:8000/usrinfo/usrLogout/",{},{headers:n,credentials:!0}).then(function(e){localStorage.setItem("auth",""),t.ustate=!1,t.$router.push("/login")},function(t){console.log("failed to logout")})},handleSelect:function(t,e){console.log(t,e)},navigate:function(t){this.$router.push(t)}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"menuTab",attrs:{id:"menutab"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[n("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.navigate("/")}}},[t._v("Home")]),t._v(" "),n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[t._v("User")]),t._v(" "),n("el-menu-item",{attrs:{index:"3-1",id:"loginbox"},on:{click:function(e){t.navigate("/login")}}},[t._v("login/register")]),t._v(" "),n("el-menu-item",{attrs:{index:"3-2"},on:{click:t.logout}},[t._v("logout")]),t._v(" "),n("el-menu-item",{attrs:{index:"3-3",id:"loginbox"},on:{click:function(e){t.navigate("/dashboard")}}},[t._v("dashboard")])],2),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("Projects & Downloads")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.navigate("/doc/")}}},[t._v("Sydney Documents")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-2"},on:{click:function(e){t.navigate("/loststreet/")}}},[t._v("The Lost Street")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-3"},on:{click:function(e){t.navigate("/vr/")}}},[t._v("Software Download")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"4"},on:{click:t.toProf}},[t._v("About Us")])],1),t._v(" "),n("div",{staticClass:"line"})],1)},staticRenderFns:[]},u=n("VU/8")(l,c,!1,null,null,null).exports;o.default.component("mmenu",u);var d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("mmenu",{attrs:{id:"mmenu"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var m=n("VU/8")({name:"app"},d,!1,function(t){n("jEVp")},null,null).exports,p=n("/ocq"),f=n("bOdI"),v=n.n(f),h={name:"editor",data:function(){var t;return t={headingSize:"Heading Size",headings:[{label:"<h1>Heading 1</h1>",value:"h1"},{label:"<h2>Heading 2</h2>",value:"h2"},{label:"<h3>Heading 3</h3>",value:"h3"},{label:"<h4>Heading 4</h4>",value:"h4"},{label:"<h5>Heading 5</h5>",value:"h5"}],imgVisible:!1,fontv:"1"},v()(t,"headingSize",""),v()(t,"imgUrl",""),v()(t,"building",{intro:"Page loading failed, please try again"}),t},created:function(){this.building=JSON.parse(localStorage.getItem("building"))},computed:{},methods:{test:function(){console.log("ed:",this.editContent),console.log("in:",document.getElementById("editbox").innerHTML)},cHead:function(){window.getSelection().toString()},submit:function(t){var e=document.getElementById("editbox").innerHTML;console.log("content to be submit",e);var n={Authorization:localStorage.getItem("auth")},o=this,r=this.building;r.intro=e,this.$http.post("http://127.0.0.1:8000/doc/api_building_info/",{building:r},{headers:n}).then(function(t){console.log("post success"),o.$emit("childEvent",{status:"success",bid:r.id})},function(t){console.log("post failed"),o.$emit("childEvent",t.status)})},showUrlDialog:function(){var t=document.getSelection().getRangeAt(0),e=document.createElement("a"),n=prompt("URL Link:","https://baidu.com");n&&(e.href=n,console.log("url added",n)),t.surroundContents(e),console.log("inner",document.getElementById("editbox").innerHTML)},insertImgByUrl:function(){document.getElementById("editbox").focus(),document.execCommand("insertimage",!1,this.imgUrl)},showImgDialog:function(){this.imgVisible=!this.imgVisible},btn:function(t){var e=t.target;console.log("content",document.getElementById("editbox").innerHTML),console.log("d",e.getAttribute("data-name"),e.getAttribute("data-value")),document.execCommand(e.getAttribute("data-name"),!1,e.getAttribute("data-value"))}},watch:{fontv:function(t){console.log("watcher",t),document.execCommand("fontsize",!1,t)},headingSize:function(t){document.execCommand("formatblock",!1,t)}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("el-button",{attrs:{id:"edit_sub",type:"primary"},on:{click:function(e){t.submit(e)}}},[t._v("submit")]),t._v(" "),n("div",{attrs:{id:"editpart"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.fontv,expression:"fontv"}],attrs:{"data-name":"fontsize","data-value":t.fontv},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fontv=e.target.multiple?n:n[0]}}},t._l(7,function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])})),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.headingSize,expression:"headingSize"}],staticClass:"selector",attrs:{placeholder:"Heading"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.headingSize=e.target.multiple?n:n[0]}}},t._l(t.headings,function(e){return n("option",{key:e.value,staticClass:"headingItem",attrs:{"data-name":"formatblock","data-value":e.value},domProps:{value:e.value,innerHTML:t._s(e.label)},on:{hover:function(e){t.btn(e)}}})})),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.fontv,expression:"fontv"}],attrs:{"data-name":"fontsize","data-value":t.fontv},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fontv=e.target.multiple?n:n[0]}}},[n("option",{staticStyle:{"font-size":"7"},domProps:{value:7}},[t._v("LEVEL 1")]),t._v(" "),n("option",{staticStyle:{"font-size":"5"},domProps:{value:5}},[t._v("LEVEL 2")]),t._v(" "),n("option",{staticStyle:{"font-size":"3"},domProps:{value:3}},[t._v("LEVEL 3")])]),t._v(" "),n("el-button",{on:{click:t.test}},[t._v("test")]),t._v(" "),n("el-button",{attrs:{"data-name":"fontsize","data-value":"5"},on:{click:function(e){t.btn(e)}}},[t._v("Large Fonts")]),t._v(" "),n("el-button",{staticClass:"red",attrs:{"data-name":"forecolor","data-value":"red"},on:{click:function(e){t.btn(e)}}},[t._v("A")]),t._v(" "),n("el-button",{attrs:{"data-name":"backColor","data-value":"lightgreen",id:"lightgreen"},on:{click:function(e){t.btn(e)}}},[t._v("ABC")]),t._v(" "),n("el-button",{attrs:{"data-name":"bold",id:"bold"},on:{click:function(e){t.btn(e)}}},[t._v("B")]),t._v(" "),n("el-button",{attrs:{"data-name":"italic"},on:{click:function(e){t.btn(e)}}},[t._v("Itelic")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertorderedlist"},on:{click:function(e){t.btn(e)}}},[t._v("ol")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertunorderedlist"},on:{click:function(e){t.btn(e)}}},[t._v("ul")]),t._v(" "),n("el-button",{attrs:{"data-name":"underline"},on:{click:function(e){t.btn(e)}}},[t._v("Underline")]),t._v(" "),n("el-button",{attrs:{"data-name":"removeformat"},on:{click:function(e){t.btn(e)}}},[t._v("Remove Format")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertimage","data-value":t.imgUrl},on:{click:t.showImgDialog}},[t._v("Insert Image")]),t._v(" "),n("el-button",{attrs:{"data-name":"unlink"},on:{click:function(e){t.btn(e)}}},[t._v("Unlink")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgVisible,expression:"imgVisible"}]},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgUrl,expression:"imgUrl"}],attrs:{type:"text"},domProps:{value:t.imgUrl},on:{input:function(e){e.target.composing||(t.imgUrl=e.target.value)}}}),n("el-button",{on:{click:t.insertImgByUrl}},[t._v("Insert")])],1),t._v(" "),n("el-button",{attrs:{"data-name":"createlink"},on:{click:t.showUrlDialog}},[t._v("Insert URL")]),t._v(" "),n("div",{attrs:{id:"editbox",contenteditable:""},domProps:{innerHTML:t._s(t.building.intro)}})],1)],1)},staticRenderFns:[]};var b=n("VU/8")(h,g,!1,function(t){n("HkO7")},"data-v-3d0d85f9",null).exports,_=n("8+8L"),w=n("xrTZ").Base64;o.default.use(_.a);var y={name:"login",data:function(){var t=this;return{formStatus:"login",ruleForm:{username:"",pass:"",checkPass:""},rules:{uname:[{validator:function(e,n,o){return console.log("valiuname",t.ruleForm.username),t.ruleForm.username?o():o(new Error("username cannot be blank"))},trigger:"blur"}],pass:[{validator:function(t,e,n){console.log("valipass",e),""===e?n(new Error("please input the password")):e.length<6?n(new Error("the password is too short")):n()},trigger:"blur"}],checkPass:[{validator:function(e,n,o){console.log("valipass2",n),""===n?o(new Error("please input the password again")):n!==t.ruleForm.pass?o(new Error("mismatch with the origin password")):o()},trigger:"blur"}]},lform:{username:"",password:""}}},methods:{register:function(){if(this.ruleForm.pass!==this.ruleForm.checkPass)this.$message.error("passwords should be same");else{var t="http://127.0.0.1:8000",e=t+"/usrinfo/repeatUser/",n=this;this.$http.get(e,{params:{username:n.ruleForm.username}}).then(function(o){console.log("res",o.body),"pass"===o.body?(e=t+"/usrinfo/usrRegister/",n.$http.post(e,{username:n.ruleForm.username,password:n.ruleForm.pass}).then(function(t){n.$message({message:"register success",type:"success"}),n.swapcard()},function(t){console.log("failed",t),n.$message.error("register failed, please try later")})):n.$message.error("username already exists, please change to another one")},function(t){})}},submit:function(){var t=this;console.log("submitted");var e=this,n=this.$route.params.from;console.log("previous status",n),this.$http.post("http://127.0.0.1:8000/usrinfo/authValidate/",{username:this.lform.username,password:this.lform.password},{credentials:!1}).then(function(o){var r=o.body;console.log("success, get response:",r);var a=w.encode(e.lform.username+":"+e.lform.password);a="Basic "+a,console.log("base64",a),localStorage.setItem("auth",a),n?e.$router.go(-1):t.$router.push("/dashboard")},function(e){console.log("there is an error",e),t.$message.error("username or password is incorrect")}),console.log("submit!")},swapcard:function(){this.formStatus="register"===this.formStatus?"login":"register"}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},["login"===t.formStatus?[n("el-form",{ref:"form",attrs:{model:t.lform}},[n("el-form-item",{attrs:{label:"username"}},[n("el-input",{model:{value:t.lform.username,callback:function(e){t.$set(t.lform,"username",e)},expression:"lform.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.lform.password,callback:function(e){t.$set(t.lform,"password",e)},expression:"lform.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Login")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"text",id:"register"},on:{click:t.swapcard}},[t._v("Register")])],1)],1)]:"register"===t.formStatus?n("div",[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules}},[n("el-form-item",{attrs:{label:"username",prop:"uname"}},[n("el-input",{model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"password",prop:"pass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"repeat password",prop:"checkPass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("Register")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"text",id:"register"},on:{click:t.swapcard}},[t._v("sign in")])],1)],1)],1):t._e()],2)},staticRenderFns:[]};var $=n("VU/8")(y,x,!1,function(t){n("4GIO")},null,null).exports,k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usertab"}},[n("el-col",{staticStyle:{"margin-top":"3%"},attrs:{span:12}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:t.handleOpen,close:t.handleClose}},[n("el-menu-item",{attrs:{index:"1"}},[n("div",{attrs:{"data-name":"profile"},on:{click:function(e){t.swapBoard(e)}}},[n("i",{staticClass:"el-icon-edit-outline"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Profile")])])]),t._v(" "),n("el-menu-item",{attrs:{index:"2"}},[n("div",{attrs:{"data-name":"settings"},on:{click:function(e){t.swapBoard(e)}}},[n("i",{staticClass:"el-icon-menu"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Settings")])])])],1)],1)],1)},staticRenderFns:[]};var S=n("VU/8")({name:"usertab",methods:{handleOpen:function(t,e){},handleClose:function(t,e){},swapBoard:function(t){var e=t.currentTarget.getAttribute("data-name");e="profile"===e?"":e,this.$router.push("/dashboard/"+e)}}},k,!1,function(t){n("Vcrj")},null,null).exports;o.default.component("usrtab",S);var C={name:"dashboard",created:function(){var t=localStorage.getItem("jwt");console.log("token",t)},methods:{}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"dashboard"}},[e("div",[e("usrtab")],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var P=n("VU/8")(C,E,!1,function(t){n("BomA")},null,null).exports,F={name:"profile",data:function(){return{fileList2:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],imageUrl:"",form:{avatar:"",username:"",organization:"",email:"",summary:""}}},beforeMount:function(){var t=this,e=this.getAuth(),n=this;this.$http.get("http://127.0.0.1:8000/usrinfo/basicInfo/",{credentials:!0,headers:e}).then(function(t){var e=t.data;n.form.avatar=e.avatar||"",n.form.username=e.user.username,n.form.email=e.user.email,n.form.summary=e.summary||"",n.form.organization=e.organization||"",console.log("request success")},function(e){401!==e.status&&403!==e.status||n.$message.error("Plase login first"),console.log("request failed"),t.$router.push("/login")})},methods:{getAuth:function(){var t=localStorage.getItem("auth");return t?{Authorization:t}:(this.$message.error("Session expired, Please login first"),this.$router.push("/login"),"unauth")},updateProfile:function(){var t=this,e={organization:this.form.organization,summary:this.form.summary,email:this.form.email},n=this.getAuth();if("unauth"!==n){this.$http.post("http://127.0.0.1:8000/usrinfo/basicInfo/",e,{headers:n}).then(function(e){t.$message({message:"Profile Updated",type:"success"})},function(e){t.$message.error("We encountered some errors, please try again")})}},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_profile"}},[n("el-form",{ref:"form",staticClass:"form_panel",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"username"}},[n("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"organization"}},[n("el-input",{model:{value:t.form.organization,callback:function(e){t.$set(t.form,"organization",e)},expression:"form.organization"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"email"}},[n("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"summary"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.updateProfile}},[t._v("Update")])],1)],1)},staticRenderFns:[]};var j=n("VU/8")(F,U,!1,function(t){n("dPbM")},null,null).exports,I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_activity"}},[n("h1",{staticStyle:{"text-align":"left","margin-left":"15px"}},[t._v(" Recent Activities")]),t._v(" "),t._l(t.info,function(e){return n("div",{staticClass:"usr_act_bar"},[n("div",{staticClass:"status_bar"},[n("img",{staticClass:"usr_act_avatar",attrs:{src:"act.avatar"}}),t._v(" "),n("label",{staticClass:"usr_act_nickname"},[t._v(t._s(e.nickname))])]),t._v(" "),n("div",{domProps:{innerHTML:t._s(e.describe)}})])})],2)},staticRenderFns:[]};var R=n("VU/8")({name:"profile",data:function(){return{info:[{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'},{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'},{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'}]}}},I,!1,function(t){n("z3pq")},null,null).exports,V=n("xrTZ").Base64,L={name:"profile",data:function(){var t=this;return{form:{opassword:"",npassword:"",rpassword:""},rules:{opassword:[{validator:function(t,e,n){console.log("occ"),""===e?n(new Error("Please input the password")):n()},trigger:"blur"}],npassword:[{validator:function(t,e,n){console.log("cc"),""===e?n(new Error("Please input the password")):n()},trigger:"blur"}],rpassword:[{validator:function(e,n,o){console.log("cc2"),""===n?o(new Error("Please input the password")):n!==t.form.npassword?o(new Error("Passwords are not the same")):o()},trigger:"blur"}]}}},methods:{resetPass:function(){var t=this,e=this.form.npassword,n=this.form.opassword,o=localStorage.getItem("auth"),r={Authorization:o};o||(this.error.$message("please login first"),this.$router.push("/login")),this.$refs.form.validate(function(o){o?t.$http.post("http://127.0.0.1:8000/usrinfo/resetPass/",{npass:e,opass:n},{headers:r}).then(function(n){console.log("reset success"),t.$message({message:"Password reset success!",type:"success"});var o=n.body,r="Basic "+V.encode(o+":"+e);localStorage.setItem("auth",r),t.$router.push("/dashboard/")},function(e){console.log("reset failed"),t.$message.error("something goes wrong, please try again")}):console.log("invalid form")})}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_settings"}},[n("h1",{staticStyle:{"text-align":"left","margin-left":"15px"}},[t._v(" reset your password")]),t._v(" "),n("el-form",{ref:"form",staticClass:"form_panel",attrs:{model:t.form,rules:t.rules,"status-icon":"","label-width":"80px"}},[n("el-form-item",{attrs:{label:"old password",prop:"opassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.opassword,callback:function(e){t.$set(t.form,"opassword",e)},expression:"form.opassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"new password",prop:"npassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.npassword,callback:function(e){t.$set(t.form,"npassword",e)},expression:"form.npassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"repeat",prop:"rpassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.rpassword,callback:function(e){t.$set(t.form,"rpassword",e)},expression:"form.rpassword"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.resetPass}},[t._v("Update")])],1)],1)},staticRenderFns:[]};var A=n("VU/8")(L,z,!1,function(t){n("GIaV"),n("LGhG")},null,null).exports,H=n("BO1k"),T=n.n(H),B={name:"pinboard",props:["comments","url","sid"],data:function(){return{userComment:""}},methods:{publishComments:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();console.log("datetime",e),console.log("sid",this.sid);var n=this,o={Authorization:localStorage.getItem("auth")};this.$http.post(this.url,{sid:n.sid,time:e,content:n.userComment},{credentials:!0,headers:o}).then(function(t){console.log("success",t),console.log("status",t.status),n.$emit("childEvent","success")},function(t){n.$emit("childEvent",t.status),console.log("failed")})}}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pinboard"}},[n("el-input",{attrs:{type:"textarea",rows:2,minr:"",placeholder:"publish your comments here",autosize:{minRows:4}},model:{value:t.userComment,callback:function(e){t.userComment=e},expression:"userComment"}}),t._v(" "),n("el-button",{attrs:{id:"cbtn",type:"success",plain:""},on:{click:t.publishComments}},[t._v("comment")]),t._v(" "),t._l(t.comments,function(e){return n("div",{staticClass:"comment"},[n("div",{staticClass:"content"},[n("label",{staticClass:"ctime"},[n("strong",[t._v(t._s(e.uname))]),t._v(" commented at "+t._s(e.time))]),t._v(" "),n("p",{staticStyle:{padding:"5px 10px"}},[t._v(t._s(e.content))])])])})],2)},staticRenderFns:[]};var G=n("VU/8")(B,M,!1,function(t){n("2GMO")},null,null).exports;o.default.component("pinb",G);var O={name:"lsproject",data:function(){return{showUp:!1,fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],ban:{name:"",cover:"",intro:""},gallery:[],comments:[],sid:""}},methods:{childListener:function(t){if(console.log("child",t),"success"===t)this.$message({message:"post success",type:"success"});else if(401===t||403===t){this.$message.error("Please login first");this.$router.push({name:"login",params:{from:"redirect"}})}else this.$message.error("Post failed, please try agian")},toProject:function(){this.inProject=!0,this.$router.push("/loststreet/project")},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},showUpWindow:function(){this.showUp=!this.showUp}},beforeCreate:function(){var t=this,e="http://127.0.0.1:8000",n=this.$route.params.proid||1;this.sid=n;var o="/loststreet/api_street_page/";o=e+o,this.$http.get(o,{params:{sid:n}}).then(function(n){var o=n.body;o.cover=e+o.cover;var r=!0,a=!1,s=void 0;try{for(var i,l=T()(o.gallery);!(r=(i=l.next()).done);r=!0){var c=i.value;c.thumbnail=e+c.thumbnail,c.image=e+c.image}}catch(t){a=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw s}}t.sid=o.id,t.ban=o,t.gallery=o.gallery,t.comments=o.comments,console.log("success",t.ban)},function(t){console.log("failed")})}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"lsproject"}},[n("h1",{staticStyle:{"padding-top":"20px"}},[t._v(t._s(t.ban.name))]),t._v(" "),n("div",{staticClass:"bblock"},[n("a",{attrs:{href:t.ban.cover}},[n("img",{staticClass:"banner",attrs:{src:t.ban.cover}})]),t._v(" "),n("p",[t._v(t._s(t.ban.intro))]),t._v(" "),t.gallery.length>0?n("el-carousel",{attrs:{interval:4e3,type:"card",height:"200px"}},t._l(t.gallery,function(e){return n("el-carousel-item",{key:e.index},[n("img",{staticClass:"picimg",attrs:{src:e.thumbnail,"data-proid":e.id},on:{click:t.toProject}})])})):t._e(),t._v(" "),n("pinb",{attrs:{comments:t.comments,url:"http://127.0.0.1:8000/loststreet/api_street_comment/",sid:1},on:{childEvent:t.childListener}})],1)])},staticRenderFns:[]};var N=n("VU/8")(O,q,!1,function(t){n("q6yK")},null,null).exports,W={name:"pictab",data:function(){return{imgUrl:"https://cn.vuejs.org/images/logo.png",title:"The Lost Street",dis:"none",pics:[{title:"The Lost Street",url:"/static/loststreet.jpg",route:"loststreet"},{title:"Documents",url:"/static/streetdoc.jpg",route:"doc"},{title:"Experience with VR",url:"/static/vr.jpg",route:"vr"}]}},methods:{navigate:function(t){console.log("touched"),t.cancelBuble=!0,this.$router.push(t.currentTarget.getAttribute("data-route"))},showTitle:function(){console.log("toggled"),this.dis="block"===this.dis?"none":"block"}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pic"}},[n("el-carousel",{attrs:{interval:4e3,type:"card",height:"500px"}},t._l(t.pics,function(e){return n("el-carousel-item",{key:e.index},[n("img",{staticClass:"picimg",attrs:{src:e.url,"data-route":e.route},on:{click:function(e){t.navigate(e)}}})])}))],1)},staticRenderFns:[]};var K=n("VU/8")(W,D,!1,function(t){n("PQJI")},null,null).exports;o.default.component("pic",K);var Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"mainpage"}},[e("pic")],1)},staticRenderFns:[]};var Q=n("VU/8")({name:"mainpage"},Y,!1,function(t){n("XdYe")},null,null).exports,X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"ls_main"}},[e("router-view")],1)},staticRenderFns:[]};var J=n("VU/8")({name:"ls_main"},X,!1,function(t){n("S0gi")},null,null).exports,Z={name:"ls_main",data:function(){return{banners:[]}},methods:{toProject:function(t){console.log("touched",t.currentTarget.getAttribute("data-proid"));var e=t.currentTarget.getAttribute("data-proid");this.inProject=!0,this.$router.push({name:"ls_project",params:{proid:e}})}},beforeCreate:function(){var t=this;this.$http.get("http://127.0.0.1:8000/loststreet/api_index_page/").then(function(e){var n=e.body;n.forEach(function(t){t.cover="http://127.0.0.1:8000"+t.cover}),console.log(n),t.banners=n},function(t){console.log("error occured")})}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{attrs:{id:"ls_body"}},t._l(t.banners,function(e){return n("div",{staticClass:"bblock",attrs:{"data-proid":e.id},on:{click:t.toProject}},[n("img",{staticClass:"banner",attrs:{src:e.cover}}),t._v(" "),n("span",{staticClass:"btitle"},[t._v(t._s(e.name))])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"ls_title"}},[e("h1",[this._v("The Lost Streets")])])}]};var et=n("VU/8")(Z,tt,!1,function(t){n("XWNW")},null,null).exports,nt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_main"}},[e("router-view")],1)},staticRenderFns:[]};var ot=n("VU/8")({name:"doc_main"},nt,!1,function(t){n("HKI0")},null,null).exports,rt={name:"doc_home",data:function(){return{banners:[]}},beforeCreate:function(){var t=this,e="http://127.0.0.1:8000";this.$http.get("http://127.0.0.1:8000/doc/api_street_list/").then(function(n){console.log("street list success"),n.body.forEach(function(t){t.cover=e+t.cover}),t.banners=n.body},function(t){console.log("street list failed",t)})},methods:{toStreet:function(t){var e=t.currentTarget.getAttribute("data-proid");console.log("sid",e),this.$router.push({name:"doc_street",params:{sid:e}})}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_home"}},[t._m(0),t._v(" "),n("div",{attrs:{id:"doc_body"}},t._l(t.banners,function(e){return n("div",{staticClass:"bblock",attrs:{"data-proid":e.id},on:{click:t.toStreet}},[n("img",{staticClass:"banner",attrs:{src:e.cover}}),t._v(" "),n("span",{staticClass:"btitle"},[t._v(t._s(e.name))])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_title"}},[e("h1",[this._v("Stories of Streets")])])}]};var st=n("VU/8")(rt,at,!1,function(t){n("jUL7")},"data-v-f9efb12e",null).exports,it={name:"doc_street",data:function(){return{banner:"",str_name:"",intro:"",buildings:[]}},beforeCreate:function(){var t=this,e=this.$route.params.sid||1,n="http://127.0.0.1:8000";this.$http.get("http://127.0.0.1:8000/doc/api_street_info/",{params:{sid:e}}).then(function(e){console.log("request success");var o=e.body;t.str_name=o.name,t.banner=n+o.cover,t.intro=o.intro,o.buildings.forEach(function(t){t.cover=n+t.cover}),t.buildings=o.buildings},function(t){console.log("request failed")})},methods:{toBuilding:function(t){var e=t.currentTarget.getAttribute("data-bid");console.log("bid",e),this.$router.push({name:"doc_building",params:{bid:e}})}}},lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_street"}},[n("div",[n("label",{attrs:{id:"str_name"}},[t._v(t._s(t.str_name))]),t._v(" "),n("img",{attrs:{src:t.banner,id:"str_banner"}})]),t._v(" "),n("p",{staticClass:"intro",domProps:{innerHTML:t._s(t.intro)}}),t._v(" "),t._l(t.buildings,function(e){return n("div",{key:e.index,staticClass:"bnav",attrs:{"data-bid":e.id},on:{click:t.toBuilding}},[n("div",{staticClass:"bname"},[n("label",[t._v(t._s(e.name))]),n("i",{staticClass:"el-icon-caret-right"})]),t._v(" "),n("img",{staticClass:"bpic",attrs:{src:e.cover,height:"200px"}})])})],2)},staticRenderFns:[]};var ct=n("VU/8")(it,lt,!1,function(t){n("ORcG")},null,null).exports,ut=n("mvHQ"),dt=n.n(ut),mt={name:"doc_building",data:function(){return{building:{}}},beforeCreate:function(){var t=this,e=this.$route.params.bid||-1;-1===e&&(this.$message.error("An unknown error ocurred, please try again"),this.$router.go(-1)),this.$http.get("http://127.0.0.1:8000/doc/api_building_info/",{params:{bid:e}}).then(function(e){t.building=e.data},function(t){console.log("failed to request")})},methods:{goEdit:function(){localStorage.setItem("building",dt()(this.building)),this.$router.push("/doc/edit")},goStreet:function(){var t=this.building.stname;this.$router.push({name:"doc_street",params:{sid:t}})}}},pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_building"}},[n("div",{attrs:{id:"htmlContainer"},domProps:{innerHTML:t._s(t.building.intro)}}),t._v(" "),n("div",{attrs:{id:"floatWin"}},[n("ul",[n("li",{on:{click:t.goEdit}},[t._v("Edit this page")]),t._v(" "),n("li",{on:{click:t.goStreet}},[t._v("Back to Street Page")]),t._v(" "),n("li",[t._v("Report this page")])])])])},staticRenderFns:[]};var ft=n("VU/8")(mt,pt,!1,function(t){n("l4At")},null,null).exports;o.default.component("editor",b);var vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_edit"}},[e("editor",{on:{childEvent:this.childListener}})],1)},staticRenderFns:[]};var ht=n("VU/8")({name:"doc_edit",methods:{childListener:function(t){"success"===t.status?(this.$message({message:"submit success! Your contribution will be displayed after inspection.",type:"success"}),this.$router.push({name:"doc_building",params:{bid:t.bid}})):401===t.status||403===t.status?(this.$message.error("Please login first"),this.$router.push({name:"login",params:{from:"redirect"}})):this.$message.error("Post failed, please try again")}}},vt,!1,function(t){n("Z7yj")},null,null).exports,gt={name:"vr",methods:{download:function(t){var e="/static/"+t;console.log(e),this.$http.get(e).then(function(t){},function(t){})}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vr"}},[n("h1",[t._v("VSR Download")]),t._v(" "),n("el-button",{staticClass:"dbtn",attrs:{type:"primary"},on:{click:function(e){t.download("win7.tar.gz")}}},[t._v("Windows 7+")]),t._v(" "),n("el-button",{staticClass:"dbtn",attrs:{type:"primary"},on:{click:function(e){t.download("apple.tar.gz")}}},[t._v("OSX")])],1)},staticRenderFns:[]};var _t=n("VU/8")(gt,bt,!1,function(t){n("mNbS")},null,null).exports;o.default.use(p.a);var wt=new p.a({routes:[{path:"/",name:"mainpage",component:Q},{path:"/add",name:"editor",component:b},{path:"/login",name:"login",component:$},{path:"/dashboard",component:P,children:[{path:"/",name:"usr_profile",component:j},{path:"activities",name:"usr_activity",component:R},{path:"settings",name:"usr_setting",component:A}]},{path:"/loststreet",component:J,children:[{path:"/",name:"ls_main",component:et},{path:"project",name:"ls_project",component:N}]},{path:"/doc",component:ot,children:[{path:"/",name:"doc_home",component:st},{path:"street",name:"doc_street",component:ct},{path:"building",name:"doc_building",component:ft},{path:"edit",name:"doc_edit",component:ht}]},{path:"/vr",component:_t,name:"vr"}]});o.default.config.productionTip=!1,new o.default({el:"#app",router:wt,template:"<App/>",components:{App:m}})},ORcG:function(t,e){},PQJI:function(t,e){},S0gi:function(t,e){},Vcrj:function(t,e){},XWNW:function(t,e){},XdYe:function(t,e){},Z7yj:function(t,e){},dPbM:function(t,e){},jEVp:function(t,e){},jUL7:function(t,e){},l4At:function(t,e){},mNbS:function(t,e){},q6yK:function(t,e){},tvR6:function(t,e){},z3pq:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f1fe69caf3aeea728189.js.map