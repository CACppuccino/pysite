webpackJsonp([1],{0:function(t,e){},BomA:function(t,e){},GIaV:function(t,e){},HKI0:function(t,e){},J44U:function(t,e){},LGhG:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o=n("zL8q"),s=n.n(o);n("tvR6");a.default.use(s.a);var r={name:"menutab",data:function(){return{ustate:!1,activeIndex:"1",activeIndex2:"1"}},created:function(){localStorage.getItem("auth")&&(this.ustate=!0)},methods:{handleSelect:function(t,e){console.log(t,e)},navigate:function(t){this.$router.push(t)}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menutab"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#ffffff","active-text-color":"#ffd04b"}},[n("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.navigate("/")}}},[t._v("Home")]),t._v(" "),n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[t._v("User")]),t._v(" "),n("el-menu-item",{attrs:{index:"3-1",id:"loginbox"},on:{click:function(e){t.navigate("/login")}}},[t._v("login/register")]),t._v(" "),t.ustate?n("el-menu-item",{attrs:{index:"3-2",id:"loginbox"},on:{click:function(e){t.navigate("/dashboard")}}},[t._v("dashboard")]):t._e()],2),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("Projects & Downloads")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.navigate("/doc/")}}},[t._v("Sydney Documents")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-2"},on:{click:function(e){t.navigate("/loststreet/")}}},[t._v("The Lost Street")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-3"},on:{click:function(e){t.navigate("/vr/")}}},[t._v("Software Download")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"4"}},[n("a",{attrs:{href:"https://researchers.anu.edu.au/researchers/devine-k",target:"_blank"}},[t._v("About Us")])])],1),t._v(" "),n("div",{staticClass:"line"})],1)},staticRenderFns:[]},l=n("VU/8")(r,i,!1,null,null,null).exports;a.default.component("mmenu",l);var c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("mmenu",{attrs:{id:"mmenu"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")({name:"app"},c,!1,function(t){n("lZ0j")},null,null).exports,d=n("/ocq"),m=n("bOdI"),p=n.n(m),f={name:"editor",data:function(){var t;return t={headingSize:"",headings:[{label:"<h1>Heading 1</h1>",value:"h1"},{label:"<h2>Heading 2</h2>",value:"h2"},{label:"<h3>Heading 3</h3>",value:"h3"},{label:"<h4>Heading 4</h4>",value:"h4"},{label:"<h5>Heading 5</h5>",value:"h5"}],imgVisible:!1,fontv:"1"},p()(t,"headingSize",""),p()(t,"imgUrl",""),p()(t,"building",{intro:"Page loading failed, please try again"}),t},created:function(){this.building=JSON.parse(localStorage.getItem("building"))},computed:{},methods:{test:function(){console.log("ed:",this.editContent),console.log("in:",document.getElementById("editbox").innerHTML)},cHead:function(){window.getSelection().toString()},submit:function(t){var e=document.getElementById("editbox").innerHTML;console.log("content to be submit",e);var n={Authorization:localStorage.getItem("auth")},a=this,o=this.building;o.intro=e,this.$http.post("http://127.0.0.1:8000/doc/api_building_info/",{building:o},{headers:n}).then(function(t){console.log("post success"),a.$emit("childEvent",{status:"success",bid:o.id})},function(t){console.log("post failed"),a.$emit("childEvent",t.status)})},showUrlDialog:function(){var t=document.getSelection().getRangeAt(0),e=document.createElement("a"),n=prompt("URL Link:","https://baidu.com");n&&(e.href=n,console.log("url added",n)),t.surroundContents(e),console.log("inner",document.getElementById("editbox").innerHTML)},insertImgByUrl:function(){document.getElementById("editbox").focus(),document.execCommand("insertimage",!1,this.imgUrl)},showImgDialog:function(){this.imgVisible=!this.imgVisible},btn:function(t){var e=t.target;console.log("content",document.getElementById("editbox").innerHTML),console.log("d",e.getAttribute("data-name"),e.getAttribute("data-value")),document.execCommand(e.getAttribute("data-name"),!1,e.getAttribute("data-value"))}},watch:{fontv:function(t){console.log("watcher",t),document.execCommand("fontsize",!1,t)},headingSize:function(t){document.execCommand("formatblock",!1,t)}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("el-button",{attrs:{id:"edit_sub",type:"primary"},on:{click:function(e){t.submit(e)}}},[t._v("submit")]),t._v(" "),n("div",{attrs:{id:"editpart"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.fontv,expression:"fontv"}],attrs:{"data-name":"fontsize","data-value":t.fontv},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fontv=e.target.multiple?n:n[0]}}},t._l(7,function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])})),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.headingSize,expression:"headingSize"}],staticClass:"selector",attrs:{placeholder:"Heading Size"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.headingSize=e.target.multiple?n:n[0]}}},t._l(t.headings,function(e){return n("option",{key:e.value,staticClass:"headingItem",attrs:{"data-name":"formatblock","data-value":e.value},domProps:{value:e.value,innerHTML:t._s(e.label)},on:{hover:function(e){t.btn(e)}}})})),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.fontv,expression:"fontv"}],attrs:{"data-name":"fontsize","data-value":t.fontv},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fontv=e.target.multiple?n:n[0]}}},[n("option",{staticStyle:{"font-size":"7"},domProps:{value:7}},[t._v("LEVEL 1")]),t._v(" "),n("option",{staticStyle:{"font-size":"5"},domProps:{value:5}},[t._v("LEVEL 2")]),t._v(" "),n("option",{staticStyle:{"font-size":"3"},domProps:{value:3}},[t._v("LEVEL 3")])]),t._v(" "),n("el-button",{on:{click:t.test}},[t._v("test")]),t._v(" "),n("el-button",{attrs:{"data-name":"fontsize","data-value":"5"},on:{click:function(e){t.btn(e)}}},[t._v("大字体")]),t._v(" "),n("el-button",{staticClass:"red",attrs:{"data-name":"forecolor","data-value":"red"},on:{click:function(e){t.btn(e)}}},[t._v("A")]),t._v(" "),n("el-button",{attrs:{"data-name":"backColor","data-value":"lightgreen",id:"lightgreen"},on:{click:function(e){t.btn(e)}}},[t._v("ABC")]),t._v(" "),n("el-button",{attrs:{"data-name":"bold",id:"bold"},on:{click:function(e){t.btn(e)}}},[t._v("B")]),t._v(" "),n("el-button",{attrs:{"data-name":"italic"},on:{click:function(e){t.btn(e)}}},[t._v("Itelic")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertorderedlist"},on:{click:function(e){t.btn(e)}}},[t._v("ol")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertunorderedlist"},on:{click:function(e){t.btn(e)}}},[t._v("ul")]),t._v(" "),n("el-button",{attrs:{"data-name":"underline"},on:{click:function(e){t.btn(e)}}},[t._v("Underline")]),t._v(" "),n("el-button",{attrs:{"data-name":"removeformat"},on:{click:function(e){t.btn(e)}}},[t._v("Remove Format")]),t._v(" "),n("el-button",{attrs:{"data-name":"insertimage","data-value":t.imgUrl},on:{click:t.showImgDialog}},[t._v("Insert Image")]),t._v(" "),n("el-button",{attrs:{"data-name":"unlink"},on:{click:function(e){t.btn(e)}}},[t._v("Unlink")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgVisible,expression:"imgVisible"}]},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgUrl,expression:"imgUrl"}],attrs:{type:"text"},domProps:{value:t.imgUrl},on:{input:function(e){e.target.composing||(t.imgUrl=e.target.value)}}}),n("el-button",{on:{click:t.insertImgByUrl}},[t._v("Insert")])],1),t._v(" "),n("el-button",{attrs:{"data-name":"createlink"},on:{click:t.showUrlDialog}},[t._v("Insert URL")]),t._v(" "),n("div",{attrs:{id:"editbox",contenteditable:""},domProps:{innerHTML:t._s(t.building.intro)}})],1)],1)},staticRenderFns:[]};var h=n("VU/8")(f,v,!1,function(t){n("ZWcB")},"data-v-4da3582a",null).exports,g=n("8+8L"),_=n("xrTZ").Base64;a.default.use(g.a);var b={name:"login",data:function(){var t=this;return{formStatus:"login",ruleForm:{username:"",pass:"",checkPass:""},rules:{uname:[{validator:function(e,n,a){return console.log("valiuname",t.ruleForm.username),t.ruleForm.username?a():a(new Error("username cannot be blank"))},trigger:"blur"}],pass:[{validator:function(t,e,n){console.log("valipass",e),""===e?n(new Error("please input the password")):e.length<6?n(new Error("the password is too short")):n()},trigger:"blur"}],checkPass:[{validator:function(e,n,a){console.log("valipass2",n),""===n?a(new Error("please input the password again")):n!==t.ruleForm.pass?a(new Error("mismatch with the origin password")):a()},trigger:"blur"}]},lform:{username:"",password:""}}},methods:{register:function(){if(this.ruleForm.pass!==this.ruleForm.checkPass)this.$message.error("passwords should be same");else{var t="http://127.0.0.1:8000",e=t+"/usrinfo/repeatUser/",n=this;this.$http.get(e,{params:{username:n.ruleForm.username}}).then(function(a){console.log("res",a.body),"pass"===a.body?(e=t+"/usrinfo/usrRegister/",n.$http.post(e,{username:n.ruleForm.username,password:n.ruleForm.pass}).then(function(t){n.$message({message:"register success",type:"success"}),n.swapcard()},function(t){console.log("failed",t),n.$message.error("register failed, please try later")})):n.$message.error("username already exists, please change to another one")},function(t){})}},submit:function(){var t=this;console.log("submitted");var e=this,n=this.$route.params.from;console.log("previous status",n),this.$http.post("http://127.0.0.1:8000/usrinfo/authValidate/",{username:this.lform.username,password:this.lform.password}).then(function(a){var o=a.body;console.log("success, get response:",o);var s=_.encode(e.lform.username+":"+e.lform.password);s="Basic "+s,console.log("base64",s),localStorage.setItem("auth",s),n?e.$router.go(-1):t.$router.push("/dashboard")},function(t){console.log("there is an error",t)}),console.log("submit!")},swapcard:function(){this.formStatus="register"===this.formStatus?"login":"register"}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},["login"===t.formStatus?[n("el-form",{ref:"form",attrs:{model:t.lform}},[n("el-form-item",{attrs:{label:"username"}},[n("el-input",{model:{value:t.lform.username,callback:function(e){t.$set(t.lform,"username",e)},expression:"lform.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.lform.password,callback:function(e){t.$set(t.lform,"password",e)},expression:"lform.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Login")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"text",id:"register"},on:{click:t.swapcard}},[t._v("Register")])],1)],1)]:"register"===t.formStatus?n("div",[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules}},[n("el-form-item",{attrs:{label:"username",prop:"uname"}},[n("el-input",{model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"password",prop:"pass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"repeat password",prop:"checkPass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("Register")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"text",id:"register"},on:{click:t.swapcard}},[t._v("sign in")])],1)],1)],1):t._e()],2)},staticRenderFns:[]};var y=n("VU/8")(b,w,!1,function(t){n("O/Vd")},null,null).exports,x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usertab"}},[n("el-col",{staticStyle:{"margin-top":"3%"},attrs:{span:12}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:t.handleOpen,close:t.handleClose}},[n("el-menu-item",{attrs:{index:"1"}},[n("div",{attrs:{"data-name":"profile"},on:{click:function(e){t.swapBoard(e)}}},[n("i",{staticClass:"el-icon-edit-outline"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Profile")])])]),t._v(" "),n("el-menu-item",{attrs:{index:"2"}},[n("div",{attrs:{"data-name":"settings"},on:{click:function(e){t.swapBoard(e)}}},[n("i",{staticClass:"el-icon-menu"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Settings")])])])],1)],1)],1)},staticRenderFns:[]};var k=n("VU/8")({name:"usertab",methods:{handleOpen:function(t,e){},handleClose:function(t,e){},swapBoard:function(t){var e=t.currentTarget.getAttribute("data-name");e="profile"===e?"":e,this.$router.push("/dashboard/"+e)}}},x,!1,function(t){n("Vcrj")},null,null).exports;a.default.component("usrtab",k);var $={name:"dashboard",created:function(){var t=localStorage.getItem("jwt");console.log("token",t)},methods:{}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"dashboard"}},[e("div",[e("usrtab")],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var S=n("VU/8")($,C,!1,function(t){n("BomA")},null,null).exports,E={name:"profile",data:function(){return{fileList2:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],imageUrl:"",form:{avatar:"",username:"",organization:"",email:"",summary:""}}},beforeMount:function(){var t=this,e=this.getAuth(),n=this;this.$http.get("http://127.0.0.1:8000/usrinfo/basicInfo/",{credentials:!0,headers:e}).then(function(t){var e=t.data;n.form.avatar=e.avatar||"",n.form.username=e.user.username,n.form.email=e.user.email,n.form.summary=e.summary||"",n.form.organization=e.organization||"",console.log("request success")},function(e){401!==e.status&&403!==e.status||n.$message.error("Plase login first"),console.log("request failed"),t.$router.push("/login")})},methods:{getAuth:function(){var t=localStorage.getItem("auth");return t?{Authorization:t}:(this.$message.error("Session expired, Please login first"),this.$router.push("/login"),"unauth")},updateProfile:function(){var t=this,e={organization:this.form.organization,summary:this.form.summary,email:this.form.email},n=this.getAuth();if("unauth"!==n){this.$http.post("http://127.0.0.1:8000/usrinfo/basicInfo/",e,{headers:n}).then(function(e){t.$message({message:"Profile Updated",type:"success"})},function(e){t.$message.error("We encountered some errors, please try again")})}},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_profile"}},[n("el-form",{ref:"form",staticClass:"form_panel",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"username"}},[n("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"organization"}},[n("el-input",{model:{value:t.form.organization,callback:function(e){t.$set(t.form,"organization",e)},expression:"form.organization"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"email"}},[n("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"summary"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.updateProfile}},[t._v("Update")])],1)],1)},staticRenderFns:[]};var P=n("VU/8")(E,U,!1,function(t){n("dPbM")},null,null).exports,F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_activity"}},[n("h1",{staticStyle:{"text-align":"left","margin-left":"15px"}},[t._v(" Recent Activities")]),t._v(" "),t._l(t.info,function(e){return n("div",{staticClass:"usr_act_bar"},[n("div",{staticClass:"status_bar"},[n("img",{staticClass:"usr_act_avatar",attrs:{src:"act.avatar"}}),t._v(" "),n("label",{staticClass:"usr_act_nickname"},[t._v(t._s(e.nickname))])]),t._v(" "),n("div",{domProps:{innerHTML:t._s(e.describe)}})])})],2)},staticRenderFns:[]};var j=n("VU/8")({name:"profile",data:function(){return{info:[{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'},{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'},{avatar:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1018176218,1225448702&fm=27&gp=0.jpg",nickname:"lestina",describe:'she just uploaded a new photo for <a href="www.baidu.com">old street</a>'}]}}},F,!1,function(t){n("z3pq")},null,null).exports,R=n("xrTZ").Base64,I={name:"profile",data:function(){var t=this;return{form:{opassword:"",npassword:"",rpassword:""},rules:{opassword:[{validator:function(t,e,n){console.log("occ"),""===e?n(new Error("Please input the password")):n()},trigger:"blur"}],npassword:[{validator:function(t,e,n){console.log("cc"),""===e?n(new Error("Please input the password")):n()},trigger:"blur"}],rpassword:[{validator:function(e,n,a){console.log("cc2"),""===n?a(new Error("Please input the password")):n!==t.form.npassword?a(new Error("Passwords are not the same")):a()},trigger:"blur"}]}}},methods:{resetPass:function(){var t=this,e=this.form.npassword,n=this.form.opassword,a=localStorage.getItem("auth"),o={Authorization:a};a||(this.error.$message("please login first"),this.$router.push("/login")),this.$refs.form.validate(function(a){a?t.$http.post("http://127.0.0.1:8000/usrinfo/resetPass/",{npass:e,opass:n},{headers:o}).then(function(n){console.log("reset success"),t.$message({message:"Password reset success!",type:"success"});var a=n.body,o="Basic "+R.encode(a+":"+e);localStorage.setItem("auth",o),t.$router.push("/dashboard/")},function(e){console.log("reset failed"),t.$message.error("something goes wrong, please try again")}):console.log("invalid form")})}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"usr_settings"}},[n("h1",{staticStyle:{"text-align":"left","margin-left":"15px"}},[t._v(" reset your password")]),t._v(" "),n("el-form",{ref:"form",staticClass:"form_panel",attrs:{model:t.form,rules:t.rules,"status-icon":"","label-width":"80px"}},[n("el-form-item",{attrs:{label:"old password",prop:"opassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.opassword,callback:function(e){t.$set(t.form,"opassword",e)},expression:"form.opassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"new password",prop:"npassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.npassword,callback:function(e){t.$set(t.form,"npassword",e)},expression:"form.npassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"repeat",prop:"rpassword"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.rpassword,callback:function(e){t.$set(t.form,"rpassword",e)},expression:"form.rpassword"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.resetPass}},[t._v("Update")])],1)],1)},staticRenderFns:[]};var V=n("VU/8")(I,L,!1,function(t){n("GIaV"),n("LGhG")},null,null).exports,z=n("BO1k"),A=n.n(z),H={name:"pinboard",props:["comments","url","sid"],data:function(){return{userComment:""}},methods:{publishComments:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();console.log("datetime",e),console.log("sid",this.sid);var n=this,a={Authorization:localStorage.getItem("auth")};this.$http.post(this.url,{sid:n.sid,time:e,content:n.userComment},{credentials:!0,headers:a}).then(function(t){console.log("success",t),console.log("status",t.status),n.$emit("childEvent","success")},function(t){n.$emit("childEvent",t.status),console.log("failed")})}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pinboard"}},[n("el-input",{attrs:{type:"textarea",rows:2,minr:"",placeholder:"publish your comments here",autosize:{minRows:4}},model:{value:t.userComment,callback:function(e){t.userComment=e},expression:"userComment"}}),t._v(" "),n("el-button",{attrs:{id:"cbtn",type:"success",plain:""},on:{click:t.publishComments}},[t._v("comment")]),t._v(" "),t._l(t.comments,function(e){return n("div",{staticClass:"comment"},[n("div",{staticClass:"content"},[n("label",{staticClass:"ctime"},[n("strong",[t._v(t._s(e.uname))]),t._v(" commented at "+t._s(e.time))]),t._v(" "),n("p",{staticStyle:{padding:"5px 10px"}},[t._v(t._s(e.content))])])])})],2)},staticRenderFns:[]};var T=n("VU/8")(H,B,!1,function(t){n("xLgT")},null,null).exports;a.default.component("pinb",T);var M={name:"lsproject",data:function(){return{showUp:!1,fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],ban:{name:"",cover:"",intro:""},gallery:[],comments:[],sid:""}},methods:{childListener:function(t){if(console.log("child",t),"success"===t)this.$message({message:"post success",type:"success"});else if(401===t||403===t){this.$message.error("Please login first");this.$router.push({name:"login",params:{from:"redirect"}})}else this.$message.error("Post failed, please try agian")},toProject:function(){this.inProject=!0,this.$router.push("/loststreet/project")},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},showUpWindow:function(){this.showUp=!this.showUp}},beforeCreate:function(){var t=this,e="http://127.0.0.1:8000",n=this.$route.params.proid||1;this.sid=n;var a="/loststreet/api_street_page/";a=e+a,this.$http.get(a,{params:{sid:n}}).then(function(n){var a=n.body;a.cover=e+a.cover;var o=!0,s=!1,r=void 0;try{for(var i,l=A()(a.gallery);!(o=(i=l.next()).done);o=!0){var c=i.value;c.thumbnail=e+c.thumbnail,c.image=e+c.image}}catch(t){s=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}t.sid=a.id,t.ban=a,t.gallery=a.gallery,t.comments=a.comments,console.log("success",t.ban)},function(t){console.log("failed")})}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"lsproject"}},[n("h1",{staticStyle:{"padding-top":"20px"}},[t._v(t._s(t.ban.name))]),t._v(" "),n("div",{staticClass:"bblock"},[n("a",{attrs:{href:t.ban.cover}},[n("img",{staticClass:"banner",attrs:{src:t.ban.cover}})]),t._v(" "),n("p",[t._v(t._s(t.ban.intro))]),t._v(" "),n("el-carousel",{attrs:{interval:4e3,type:"card",height:"200px"}},t._l(t.gallery,function(e){return n("el-carousel-item",{key:e.index},[n("img",{staticClass:"picimg",attrs:{src:e.thumbnail,"data-proid":e.id},on:{click:t.toProject}})])})),t._v(" "),n("el-button",{staticClass:"uploadBtn",attrs:{type:"primary"},on:{click:t.showUpWindow}},[t._v("Upload Your Work"),n("i",{staticClass:"el-icon-upload el-icon--right"})]),t._v(" "),n("transition",{attrs:{name:"el-fade-in-linear"}},[t.showUp?n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("pick the file")]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("upload to server")]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("jpg/png files only, no larger than 500kb")])],1):t._e()],1),t._v(" "),n("pinb",{attrs:{comments:t.comments,url:"http://127.0.0.1:8000/loststreet/api_street_comment/",sid:1},on:{childEvent:t.childListener}})],1)])},staticRenderFns:[]};var G=n("VU/8")(M,W,!1,function(t){n("J44U")},null,null).exports,q={name:"pictab",data:function(){return{imgUrl:"https://cn.vuejs.org/images/logo.png",title:"The Lost Street",dis:"none",pics:[{title:"The Lost Street",url:"/static/loststreet.jpg",route:"loststreet"},{title:"Documents",url:"/static/streetdoc.jpg",route:"doc"},{title:"Experience with VR",url:"/static/vr.jpg",route:"vr"}]}},methods:{navigate:function(t){console.log("touched"),t.cancelBuble=!0,this.$router.push(t.currentTarget.getAttribute("data-route"))},showTitle:function(){console.log("toggled"),this.dis="block"===this.dis?"none":"block"}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pic"}},[n("el-carousel",{attrs:{interval:4e3,type:"card",height:"500px"}},t._l(t.pics,function(e){return n("el-carousel-item",{key:e.index},[n("img",{staticClass:"picimg",attrs:{src:e.url,"data-route":e.route},on:{click:function(e){t.navigate(e)}}})])}))],1)},staticRenderFns:[]};var D=n("VU/8")(q,O,!1,function(t){n("PQJI")},null,null).exports;a.default.component("pic",D);var N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"mainpage"}},[e("pic")],1)},staticRenderFns:[]};var Y=n("VU/8")({name:"mainpage"},N,!1,function(t){n("XdYe")},null,null).exports,J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"ls_main"}},[e("router-view")],1)},staticRenderFns:[]};var Q=n("VU/8")({name:"ls_main"},J,!1,function(t){n("S0gi")},null,null).exports,Z={name:"ls_main",data:function(){return{banners:[]}},methods:{toProject:function(t){console.log("touched",t.currentTarget.getAttribute("data-proid"));var e=t.currentTarget.getAttribute("data-proid");this.inProject=!0,this.$router.push({name:"ls_project",params:{proid:e}})}},beforeCreate:function(){var t=this;this.$http.get("http://127.0.0.1:8000/loststreet/api_index_page/").then(function(e){var n=e.body;n.forEach(function(t){t.cover="http://127.0.0.1:8000"+t.cover}),console.log(n),t.banners=n},function(t){console.log("error occured")})}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{attrs:{id:"ls_body"}},t._l(t.banners,function(e){return n("div",{staticClass:"bblock",attrs:{"data-proid":e.id},on:{click:t.toProject}},[n("img",{staticClass:"banner",attrs:{src:e.cover}}),t._v(" "),n("span",{staticClass:"btitle"},[t._v(t._s(e.name))])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"ls_title"}},[e("h1",[this._v("The Lost Streets")])])}]};var X=n("VU/8")(Z,K,!1,function(t){n("XWNW")},null,null).exports,tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_main"}},[e("router-view")],1)},staticRenderFns:[]};var et=n("VU/8")({name:"doc_main"},tt,!1,function(t){n("HKI0")},null,null).exports,nt={name:"doc_home",data:function(){return{banners:[]}},beforeCreate:function(){var t=this,e="http://127.0.0.1:8000";this.$http.get("http://127.0.0.1:8000/doc/api_street_list").then(function(n){console.log("street list success"),n.body.forEach(function(t){t.cover=e+t.cover}),t.banners=n.body},function(t){console.log("street list failed",t)})},methods:{toStreet:function(t){var e=t.currentTarget.getAttribute("data-proid");console.log("sid",e),this.$router.push({name:"doc_street",params:{sid:e}})}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_home"}},[t._m(0),t._v(" "),n("div",{attrs:{id:"doc_body"}},t._l(t.banners,function(e){return n("div",{staticClass:"bblock",attrs:{"data-proid":e.id},on:{click:t.toStreet}},[n("img",{staticClass:"banner",attrs:{src:e.cover}}),t._v(" "),n("span",{staticClass:"btitle"},[t._v(t._s(e.name))])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_title"}},[e("h1",[this._v("Stories of Streets")])])}]};var ot=n("VU/8")(nt,at,!1,function(t){n("OJvi")},"data-v-3d57343c",null).exports,st={name:"doc_street",data:function(){return{banner:"",str_name:"",intro:"",buildings:[]}},beforeCreate:function(){var t=this,e=this.$route.params.sid||1,n="http://127.0.0.1:8000";this.$http.get("http://127.0.0.1:8000/doc/api_street_info/",{params:{sid:e}}).then(function(e){console.log("request success");var a=e.body;t.str_name=a.name,t.banner=n+a.cover,t.intro=a.intro,a.buildings.forEach(function(t){t.cover=n+t.cover}),t.buildings=a.buildings},function(t){console.log("request failed")})},methods:{toBuilding:function(t){var e=t.currentTarget.getAttribute("data-bid");console.log("bid",e),this.$router.push({name:"doc_building",params:{bid:e}})}}},rt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_street"}},[n("div",[n("label",{attrs:{id:"str_name"}},[t._v(t._s(t.str_name))]),t._v(" "),n("img",{attrs:{src:t.banner,id:"str_banner"}})]),t._v(" "),n("p",{staticClass:"intro",domProps:{innerHTML:t._s(t.intro)}}),t._v(" "),t._l(t.buildings,function(e){return n("div",{key:e.index,staticClass:"bnav",attrs:{"data-bid":e.id},on:{click:t.toBuilding}},[n("div",{staticClass:"bname"},[n("label",[t._v(t._s(e.name))]),n("i",{staticClass:"el-icon-caret-right"})]),t._v(" "),n("img",{staticClass:"bpic",attrs:{src:e.cover,height:"200px"}})])})],2)},staticRenderFns:[]};var it=n("VU/8")(st,rt,!1,function(t){n("ORcG")},null,null).exports,lt=n("mvHQ"),ct=n.n(lt),ut={name:"doc_building",data:function(){return{building:{}}},beforeCreate:function(){var t=this,e=this.$route.params.bid||-1;-1===e&&(this.$message.error("An unknown error ocurred, please try again"),this.$router.go(-1)),this.$http.get("http://127.0.0.1:8000/doc/api_building_info/",{params:{bid:e}}).then(function(e){t.building=e.data},function(t){console.log("failed to request")})},methods:{goEdit:function(){localStorage.setItem("building",ct()(this.building)),this.$router.push("/doc/edit")},goStreet:function(){var t=this.building.stname;this.$router.push({name:"doc_street",params:{sid:t}})}}},dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"doc_building"}},[n("div",{attrs:{id:"htmlContainer"},domProps:{innerHTML:t._s(t.building.intro)}}),t._v(" "),n("div",{attrs:{id:"floatWin"}},[n("ul",[n("li",{on:{click:t.goEdit}},[t._v("Edit this page")]),t._v(" "),n("li",{on:{click:t.goStreet}},[t._v("Back to Street Page")]),t._v(" "),n("li",[t._v("Report this page")])])])])},staticRenderFns:[]};var mt=n("VU/8")(ut,dt,!1,function(t){n("l4At")},null,null).exports;a.default.component("editor",h);var pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"doc_edit"}},[e("editor",{on:{childEvent:this.childListener}})],1)},staticRenderFns:[]};var ft=n("VU/8")({name:"doc_edit",methods:{childListener:function(t){"success"===t.status?(this.$message({message:"submit success! Your contribution will be displayed after inspection.",type:"success"}),this.$router.push({name:"doc_building",params:{bid:t.bid}})):401===t.status||403===t.status?(this.$message.error("Please login first"),this.$router.push({name:"login",params:{from:"redirect"}})):this.$message.error("Post failed, please try again")}}},pt,!1,function(t){n("Yh6G")},null,null).exports;a.default.use(d.a);var vt=new d.a({routes:[{path:"/",name:"mainpage",component:Y},{path:"/add",name:"editor",component:h},{path:"/login",name:"login",component:y},{path:"/dashboard",component:S,children:[{path:"/",name:"usr_profile",component:P},{path:"activities",name:"usr_activity",component:j},{path:"settings",name:"usr_setting",component:V}]},{path:"/loststreet",component:Q,children:[{path:"/",name:"ls_main",component:X},{path:"project",name:"ls_project",component:G}]},{path:"/doc",component:et,children:[{path:"/",name:"doc_home",component:ot},{path:"street",name:"doc_street",component:it},{path:"building",name:"doc_building",component:mt},{path:"edit",name:"doc_edit",component:ft}]}]});a.default.config.productionTip=!1,new a.default({el:"#app",router:vt,template:"<App/>",components:{App:u}})},"O/Vd":function(t,e){},OJvi:function(t,e){},ORcG:function(t,e){},PQJI:function(t,e){},S0gi:function(t,e){},Vcrj:function(t,e){},XWNW:function(t,e){},XdYe:function(t,e){},Yh6G:function(t,e){},ZWcB:function(t,e){},dPbM:function(t,e){},l4At:function(t,e){},lZ0j:function(t,e){},tvR6:function(t,e){},xLgT:function(t,e){},z3pq:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.598b2711072938672dd7.js.map